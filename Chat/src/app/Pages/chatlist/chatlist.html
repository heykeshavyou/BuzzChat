<div class="px-3 relative h-full">
  <div class="mt-3 flex justify-between items-center">
    <h1 class="text-2xl font-medium">Chat</h1>
    <div class="flex items-center">
      <div class="link">
        <img src="/group.svg" width="30" height="30" />
      </div>
      <div class="link">
        <img src="/dot.svg" width="25" height="25" />
      </div>
    </div>
  </div>
  @if(Loading()){
  <div class="flex justify-center pt-40">
    <Loading [IsBlack]="true" width="100px" />
  </div>
  }@else {
  <div>
    @for (item of ChatService.Groups; track $index) {
    <div>
      <button class="w-full" (click)="ChatService.SetUser(item.id ?? 0)">
        <div class="my-1 p-2 person flex gap-x-2.5">
          <div class="flex justify-center items-center relative">
            <img
              src="/16.png"
              height="50"
              width="50"
              class="aspect-square object-contain"
            />
              @if(item.name==null||item.name==""){
                @if(ChatService.GetActiveUser(item.id??0)){
                  <div class=" p-1 rounded-full bg-white absolute bottom-0 right-0">
                    <div class="w-3 rounded-full h-3 bg-green-400">

                    </div>
                  </div>
                }
              @else{
                <div class=" p-1 rounded-full bg-white absolute bottom-0 right-0">
                    <div class="w-3 rounded-full h-3 bg-red-400">

                    </div>
                  </div>
              }
              }
          </div>
          <div class="py-1 w-full">
            <div class="flex justify-between">
              <p class="capitalize text-start">
                @if(item.name==null||item.name==""){
                {{ GetChatName(item.id ?? 0) }}
                }
              </p>
              <p class="text-[12px] text-gray-400 capitalize">
                @if(item.messages){
                {{
                  item.messages[item.messages.length - 1].sentOn
                    | date : "h:mm a"
                }}
                }
              </p>
            </div>
            <div class="w-full">
              @if(item.messages){
              <p
                class="text-[14px] text-start truncate text-gray-400 w-[200px]"
              >
                {{ item.messages[item.messages.length - 1].content }}
              </p>
              }
            </div>
          </div>
        </div>
      </button>
    </div>
    }
  </div>
  }
  <div
    class="h-12 w-12 absolute bottom-[5%] right-[5%] flex justify-center items-center shadow-2xl bg-gray-300 rounded-full"
  >
    <a routerLink="all">
      <img src="/messageplus.svg" width="30" />
    </a>
  </div>
</div>
